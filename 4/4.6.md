## 待ち行列理論 (M/M/1モデル)
トランザクションが実行され（はじめ）るまでにどれだけ待つ必要があるのか考える  
 - 平均でどのくらい待つか？
 - どれくらい混んでいるのか？

を指標にする。


### 4.6.1 待ち行列理論とは
 - 到着分布：トランザクションが処理開始時点（という表現が適切なのかは分からないが）に達するまでの確率分布。A%は一定時間隔で達して、B%はランダムに達して、みたいな。  
 - 平均到着率：単位時間あたりに到着するトランザクションの個数。
 - 平均サービス率：単位時間あたりに実行可能なトランザクションの数。
 - 平均サービス時間：トランザクションひとつ当たりが実行される時間
 - 平均到着間隔：トランザクションごとの間隔の平均。
 - 利用率：トランザクションの実行の窓口が単位時間にどれだけ埋まっているか


待ち行列の長さ
  - 待っているトランザクションだけの長さ：平均滞留数
  - 待っているもの + 実行中のトランザクション：平均待ち行列長


待ち行列の待ち時間
 - 待っている時間のみ：平均待ち時間（投入から、トランザクションの実行が始まるまで）。待ってる時間は短いほうが都合がよい。
 - 実行時間を含む：平均応答時間（投入から、レスポンスが得られるまで）。待ってる時間が短くても、実行に時間がかかれば長くなる。


あんまり待ち時間や待ち行列が長いと、処理が遅くなる。一方で、利用率が低いと、それはそれでリソースを持て余していることになるので難しい。
利用率を求めるには、　一回にかかる時間 \/ 単位時間あたりにできるトランザクションの数。  
上の用語でいうと、　平均到着率 \/ 平均サービス率。


### 4.6.3 平均待ち時間と平均応答時間
 - 平均待ち時間 = 利用率 \/ (1 - 利用率) x 平均サービス時間　←　自分の番が回ってくるまでの時間なので、平均的に並んでる数 x 1トランザクションあたりにかかる時間のイメージ
 - 平均応答時間 = 利用率 \/ (1 - 利用率) x 平均サービス時間 + 平均サービス時間　←　自分の番が回ってくるまで + 自分の処理が始まってから終わるまで。

 ちなみに、利用率 \/ (1 - 利用率)　は、全体が１　（利用率 + 利用してない率（造語）で 100%）なので、利用率 \/ 利用してない率　の意味


### ネットワークを評価してみる
例：平均回線待ち時間を、平均伝送時間の3倍以下にしたいとき、平均回線利用率を最大の何％にすればいい？  
かみ砕く  
平均回線待ち時間 = 平均待ち時間：あるパケットとかが、転送開始されるまでの待ち時間  
平均伝送時間 = 平均サービス時間：送信開始から、受け手に届くまでの時間  
平均回線利用率 = 利用率：単位時間当たりどれだけ回線が使われているか  

平均待ち時間 \<= 平均伝送時間 x 3 なので、   

利用率 \/ (1 - 利用率) x 平均サービス時間 \<= 3 x 平均サービス時間

みたいな形で計算できる

